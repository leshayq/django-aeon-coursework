{% extends 'shop/base.html '%}
{% block content %}
<div class="top-sales category-sales">
    <h1>{{ category_title }}</h1>
</div>

<div class='category-flex'>
    <div class='category-filters'>
        <form method="get" id="sort-form">
            <div class='detail-buying filter'>
                <div class="faded-field">
                    <p>Ціна(грн)</p>
                </div>

                <div class="filter-price">
                    <input type="number" id="lp" name="lp" min="0" max="99999" value="{{ request.GET.lp }}"/>
                    <input type="number" id="mp" name="mp" min="1" max="99999" value="{{ request.GET.mp }}"/>
                </div>
            </div>

            <div class='detail-buying filter'>
                <div class="faded-field">
                    <p>Виробник</p>
                </div>

                <div class="filter-price filter-brand" id="brands">
                    {% for brand in brand_list %}
                    <div>
                        <input type="checkbox" name="brand_key" value="{{ brand }}" {% if brand in selected_brands %} checked {% endif %}/>
                        <label for="{{ brand }}">{{ brand }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <input type="submit" class='auth-button' value="ОК"/>
    </div>
    <div>
        <div class="category-sort-by">
            <p>Виводити</p>
                <select name="sort-option" id="sort-option">
                    <!-- <option value="popular" selected>За популярністю</option> -->
                    <option value="price">Ціна: за збільшенням</option>
                    <option value="-price">Ціна: за зменшенням</option>
                </select>
            </form>
        </div>

        <div class="most-saled">
            <div class="product-grid category-grid">
                {% for category_product in category_products %}
                    <div class="product-card">
                        <a class='a-no-link' href='{{ category_product.get_absolute_url }}'>
                            <div class="product-image">
                                <img src="{{ category_product.image.url }}" alt="Product Image">
                            </div>
                            <div class="product-info">
                                <h2 class="product-title">{{ category_product.title }}</h2>
                        </a>
                            <div class="star-rating">
                                <span class="fa fa-star {% if category_product.average_rating > 0 %} checked {% endif %}"></span>
                                <span class="fa fa-star {% if category_product.average_rating > 1 %} checked {% endif %}"></span>
                                <span class="fa fa-star {% if category_product.average_rating > 2 %} checked {% endif %}"></span>
                                <span class="fa fa-star {% if category_product.average_rating > 3 %} checked {% endif %}" ></span>
                                <span class="fa fa-star {% if category_product.average_rating > 4 %} checked {% endif %}"></span>
                                <span>({{ category_product.rating_count }})</span>
                            </div>
    
                            <div class="price-and-cart">
                                <p class="product-price">₴{{ category_product.price }}</p>
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000"><path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"/></svg>
                                </span>
                                <div class="small-add-to-cart">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM246-720l96 200h280l110-200H246Zm-38-80h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Zm134 280h280-280Z"/></svg>
                                </div>
                            </div>
                        </div>
                    </div>  

                    {% empty %}
                    <div>
                        <p>За вашим запитом не знайдено товарів.</p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
</div>
{% endblock content %}